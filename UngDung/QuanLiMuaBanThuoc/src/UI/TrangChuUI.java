/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package UI;

import Model.NhanVien;
import Service.NhanVienService;
import static UI.DangNhapUI.dsNhanVienTinh;
import java.awt.Toolkit;
import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.ArrayList;
import java.util.Arrays;
import javax.swing.JOptionPane;

/**
 *
 * @author danhx
 */
public class TrangChuUI extends javax.swing.JFrame {

    /**
     * Creates new form TrangChu
     */
   
    //Bien toan cuc luu tru thong tin nhan vien
    int maNV = 0;
    String ho="";
    String ten="";
    String chucVu="";
    int tuoi=0;
    String diaChi="";
    String sDT="";
    String email="";
    String tenDangNhap ="";
    String matKhau="";
    int level=0;
    
    public TrangChuUI() {
        initComponents();
        setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("Icon\\capsule.png")));
        this.setLocationRelativeTo(null);
        phanQuyenNguoiDung();
        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        thongTinTaiKhoan = new javax.swing.JDialog();
        jPanel5 = new javax.swing.JPanel();
        btnCapNhatTaiKhoan = new javax.swing.JButton();
        btnDangXuat = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        lbHoTen = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        lbChucVu = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        lbTuoi = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        lbDiaChi = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        lbEmail = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        lbTenDangNhap = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        lbSDT = new javax.swing.JLabel();
        CapNhatTaiKhoan = new javax.swing.JDialog();
        jPanel4 = new javax.swing.JPanel();
        jPanel3 = new javax.swing.JPanel();
        txtHo = new javax.swing.JTextField();
        txtChucVu = new javax.swing.JTextField();
        txtTuoi = new javax.swing.JTextField();
        txtEmail = new javax.swing.JTextField();
        txtTenDangNhap = new javax.swing.JTextField();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        jLabel17 = new javax.swing.JLabel();
        jLabel18 = new javax.swing.JLabel();
        jLabel19 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        txtDiaChi = new javax.swing.JTextArea();
        txtMatKhau = new javax.swing.JPasswordField();
        jLabel20 = new javax.swing.JLabel();
        txtNhapLaiMatKhau = new javax.swing.JPasswordField();
        txtSDT = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        txtTen = new javax.swing.JTextField();
        cbHienMK = new javax.swing.JCheckBox();
        btbLuuTaiKhoan = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();
        jPanel1 = new javax.swing.JPanel();
        btnXuatThuoc = new javax.swing.JButton();
        btnThongKe = new javax.swing.JButton();
        btnNhanVien = new javax.swing.JButton();
        btnDanhMucThuocVaBenh = new javax.swing.JButton();
        btnNhapThuoc = new javax.swing.JButton();
        lblTenDangNhap = new javax.swing.JLabel();
        btnTaiKhoan = new javax.swing.JButton();

        thongTinTaiKhoan.setTitle("Thông tin tài khoản");
        thongTinTaiKhoan.setSize(new java.awt.Dimension(595, 350));

        jPanel5.setBackground(new java.awt.Color(255, 255, 255));

        btnCapNhatTaiKhoan.setBackground(new java.awt.Color(255, 204, 0));
        btnCapNhatTaiKhoan.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        btnCapNhatTaiKhoan.setForeground(new java.awt.Color(255, 255, 255));
        btnCapNhatTaiKhoan.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/refresh-button.png"))); // NOI18N
        btnCapNhatTaiKhoan.setText("Cập nhật");
        btnCapNhatTaiKhoan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCapNhatTaiKhoanActionPerformed(evt);
            }
        });

        btnDangXuat.setBackground(new java.awt.Color(255, 51, 51));
        btnDangXuat.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        btnDangXuat.setForeground(new java.awt.Color(255, 255, 255));
        btnDangXuat.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/logout.png"))); // NOI18N
        btnDangXuat.setText("Đăng xuất");
        btnDangXuat.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDangXuatActionPerformed(evt);
            }
        });

        jPanel2.setBackground(new java.awt.Color(255, 255, 255));
        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0))));

        jLabel1.setText("Họ tên: ");

        lbHoTen.setText("Danh xuân thừa");

        jLabel3.setText("Chức vụ:");

        lbChucVu.setText("Giám đốc");

        jLabel5.setText("Tuổi:");

        lbTuoi.setText("21");

        jLabel7.setText("Địa chỉ:");

        lbDiaChi.setText("Sóc sơn, hòn đất kiên giang");

        jLabel9.setText("Email:");

        lbEmail.setText("danhxuanthua@gmail.com");

        jLabel11.setText("Tên đăng nhập:");

        lbTenDangNhap.setText("danhxuan");

        jLabel2.setText("SĐT:");

        lbSDT.setText("0942779134");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel7)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lbDiaChi, javax.swing.GroupLayout.DEFAULT_SIZE, 401, Short.MAX_VALUE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lbChucVu, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lbHoTen, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(jLabel5)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(lbTuoi))
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(jLabel11)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(lbTenDangNhap, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addComponent(jLabel9)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(lbEmail, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                        .addContainerGap())
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lbSDT)
                        .addGap(0, 0, Short.MAX_VALUE))))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(lbHoTen))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(lbChucVu))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(lbTuoi))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(lbDiaChi))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 9, Short.MAX_VALUE)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(lbSDT))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel9)
                    .addComponent(lbEmail))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel11)
                    .addComponent(lbTenDangNhap))
                .addContainerGap())
        );

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(62, 62, 62)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel5Layout.createSequentialGroup()
                        .addComponent(btnCapNhatTaiKhoan, javax.swing.GroupLayout.PREFERRED_SIZE, 127, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnDangXuat)))
                .addContainerGap(67, Short.MAX_VALUE))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGap(33, 33, 33)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnCapNhatTaiKhoan)
                    .addComponent(btnDangXuat))
                .addContainerGap(60, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout thongTinTaiKhoanLayout = new javax.swing.GroupLayout(thongTinTaiKhoan.getContentPane());
        thongTinTaiKhoan.getContentPane().setLayout(thongTinTaiKhoanLayout);
        thongTinTaiKhoanLayout.setHorizontalGroup(
            thongTinTaiKhoanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        thongTinTaiKhoanLayout.setVerticalGroup(
            thongTinTaiKhoanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        CapNhatTaiKhoan.setTitle("Cập nhật thông tin tài khoản");
        CapNhatTaiKhoan.setSize(new java.awt.Dimension(593, 598));

        jPanel4.setBackground(new java.awt.Color(255, 255, 255));

        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 102, 102)), "Thông tin tài khoản"));
        jPanel3.setToolTipText("");

        jLabel13.setText("Họ");

        jLabel14.setText("Chức vụ");

        jLabel15.setText("Tuổi");

        jLabel16.setText("Địa chỉ");

        jLabel17.setText("Email");

        jLabel18.setText("Tên đăng nhập");

        jLabel19.setText("Mật khẩu");

        jScrollPane2.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        jScrollPane2.setVerticalScrollBarPolicy(javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER);

        txtDiaChi.setColumns(20);
        txtDiaChi.setLineWrap(true);
        txtDiaChi.setRows(5);
        txtDiaChi.setWrapStyleWord(true);
        jScrollPane2.setViewportView(txtDiaChi);

        jLabel20.setText("Xác nhận mật khẩu");

        jLabel4.setText("SĐT");

        jLabel6.setText("Tên");

        cbHienMK.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        cbHienMK.setText("Hiện");
        cbHienMK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbHienMKActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(jPanel3Layout.createSequentialGroup()
                            .addGap(42, 42, 42)
                            .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabel13, javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(jLabel14, javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(jLabel15, javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(jLabel16, javax.swing.GroupLayout.Alignment.TRAILING)))
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                            .addGap(23, 23, 23)
                            .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabel17, javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(jLabel18, javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(jLabel19, javax.swing.GroupLayout.Alignment.TRAILING)
                                .addComponent(jLabel4, javax.swing.GroupLayout.Alignment.TRAILING))))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel20)))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtSDT)
                    .addComponent(txtTenDangNhap)
                    .addComponent(jScrollPane2)
                    .addComponent(txtEmail, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(txtChucVu)
                    .addComponent(txtTuoi, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtMatKhau)
                    .addComponent(txtNhapLaiMatKhau)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(txtHo, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel6)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtTen)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(cbHienMK)
                .addContainerGap(55, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtHo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel13)
                    .addComponent(jLabel6)
                    .addComponent(txtTen, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtChucVu, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel14))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtTuoi, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel15))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel16)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 57, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel17))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(txtSDT, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtTenDangNhap, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel18))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel19)
                            .addComponent(txtMatKhau, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                        .addComponent(cbHienMK, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(1, 1, 1)))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel20)
                    .addComponent(txtNhapLaiMatKhau, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(20, Short.MAX_VALUE))
        );

        btbLuuTaiKhoan.setBackground(new java.awt.Color(0, 153, 51));
        btbLuuTaiKhoan.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        btbLuuTaiKhoan.setForeground(new java.awt.Color(255, 255, 255));
        btbLuuTaiKhoan.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/floppy-disk-save-button.png"))); // NOI18N
        btbLuuTaiKhoan.setText("Lưu");
        btbLuuTaiKhoan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btbLuuTaiKhoanActionPerformed(evt);
            }
        });

        jButton5.setBackground(new java.awt.Color(255, 51, 51));
        jButton5.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jButton5.setForeground(new java.awt.Color(255, 255, 255));
        jButton5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/cancel-button.png"))); // NOI18N
        jButton5.setText("Đóng");
        jButton5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton5ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGap(55, 55, 55)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addComponent(btbLuuTaiKhoan, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton5)))
                .addContainerGap(69, Short.MAX_VALUE))
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton5)
                    .addComponent(btbLuuTaiKhoan))
                .addContainerGap(34, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout CapNhatTaiKhoanLayout = new javax.swing.GroupLayout(CapNhatTaiKhoan.getContentPane());
        CapNhatTaiKhoan.getContentPane().setLayout(CapNhatTaiKhoanLayout);
        CapNhatTaiKhoanLayout.setHorizontalGroup(
            CapNhatTaiKhoanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        CapNhatTaiKhoanLayout.setVerticalGroup(
            CapNhatTaiKhoanLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Ứng dụng quản lí mua bán thuốc");
        setIconImages(null);

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));

        btnXuatThuoc.setBackground(new java.awt.Color(102, 153, 0));
        btnXuatThuoc.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        btnXuatThuoc.setForeground(new java.awt.Color(255, 255, 255));
        btnXuatThuoc.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/drug.png"))); // NOI18N
        btnXuatThuoc.setText("Xuất thuốc");
        btnXuatThuoc.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnXuatThuocActionPerformed(evt);
            }
        });

        btnThongKe.setBackground(new java.awt.Color(0, 153, 0));
        btnThongKe.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        btnThongKe.setForeground(new java.awt.Color(255, 255, 255));
        btnThongKe.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/calendar-beside-medicine.png"))); // NOI18N
        btnThongKe.setText("Thống kê");
        btnThongKe.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThongKeActionPerformed(evt);
            }
        });

        btnNhanVien.setBackground(new java.awt.Color(204, 0, 102));
        btnNhanVien.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        btnNhanVien.setForeground(new java.awt.Color(255, 255, 255));
        btnNhanVien.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/student.png"))); // NOI18N
        btnNhanVien.setText("Nhân viên");
        btnNhanVien.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNhanVienActionPerformed(evt);
            }
        });

        btnDanhMucThuocVaBenh.setBackground(new java.awt.Color(0, 102, 153));
        btnDanhMucThuocVaBenh.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        btnDanhMucThuocVaBenh.setForeground(new java.awt.Color(255, 255, 255));
        btnDanhMucThuocVaBenh.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/book.png"))); // NOI18N
        btnDanhMucThuocVaBenh.setText("Danh mục thuốc & bệnh");
        btnDanhMucThuocVaBenh.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDanhMucThuocVaBenhActionPerformed(evt);
            }
        });

        btnNhapThuoc.setBackground(new java.awt.Color(0, 102, 153));
        btnNhapThuoc.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        btnNhapThuoc.setForeground(new java.awt.Color(255, 255, 255));
        btnNhapThuoc.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/medicine.png"))); // NOI18N
        btnNhapThuoc.setText("Nhập thuốc");
        btnNhapThuoc.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNhapThuocActionPerformed(evt);
            }
        });

        lblTenDangNhap.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        lblTenDangNhap.setForeground(new java.awt.Color(0, 153, 153));
        lblTenDangNhap.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblTenDangNhap.setText("Xin chào");

        btnTaiKhoan.setBackground(new java.awt.Color(255, 255, 255));
        btnTaiKhoan.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Icon/user.png"))); // NOI18N
        btnTaiKhoan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTaiKhoanActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(110, 110, 110)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnNhapThuoc, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 292, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnXuatThuoc, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 292, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(btnThongKe, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(btnNhanVien, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(btnDanhMucThuocVaBenh, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(126, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(lblTenDangNhap)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnTaiKhoan, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(32, 32, 32)
                        .addComponent(lblTenDangNhap))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(btnTaiKhoan, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 34, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(btnThongKe, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(btnNhanVien, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(btnNhapThuoc, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnXuatThuoc, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnDanhMucThuocVaBenh, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(71, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    public void phanQuyenNguoiDung(){
                
        for (NhanVien nhanVien : dsNhanVienTinh) {
            
            //Cua hang truong
            if (nhanVien.getLevel() == 1) {
                btnNhanVien.setEnabled(true);
                btnNhapThuoc.setEnabled(true);
                btnXuatThuoc.setEnabled(true);
                btnThongKe.setEnabled(true);
                btnDanhMucThuocVaBenh.setEnabled(true);
                lblTenDangNhap.setText("Xin chào " + nhanVien.getTen());
            }
            
            //duoc si
            if (nhanVien.getLevel() == 2) {
                btnNhanVien.setEnabled(false);
                btnNhapThuoc.setEnabled(false);
                btnXuatThuoc.setEnabled(false);
                btnThongKe.setEnabled(false);
                btnDanhMucThuocVaBenh.setEnabled(true);
                lblTenDangNhap.setText("Xin chào " + nhanVien.getTen());
            }
            
            //Thu kho
            if (nhanVien.getLevel() == 3) {
                btnNhanVien.setEnabled(false);
                btnNhapThuoc.setEnabled(true);
                btnXuatThuoc.setEnabled(false);
                btnThongKe.setEnabled(false);
                btnDanhMucThuocVaBenh.setEnabled(false);
                lblTenDangNhap.setText("Xin chào " + nhanVien.getTen());
            }
            
            //ban hang
            if (nhanVien.getLevel() == 4) {
                btnNhanVien.setEnabled(false);
                btnNhapThuoc.setEnabled(false);
                btnXuatThuoc.setEnabled(true);
                btnThongKe.setEnabled(false);
                btnDanhMucThuocVaBenh.setEnabled(false);
                lblTenDangNhap.setText("Xin chào " + nhanVien.getTen());
            }
        }
        
    }
    
    private void btnNhapThuocActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNhapThuocActionPerformed
        // TODO add your handling code here:
        NhapThuocUI nhapThuoc = new NhapThuocUI();
        nhapThuoc.setVisible(true);
        this.dispose();
        
    }//GEN-LAST:event_btnNhapThuocActionPerformed

    private void btnXuatThuocActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnXuatThuocActionPerformed
        // TODO add your handling code here:
        XuatThuocUI xuatThuoc = new XuatThuocUI();
        xuatThuoc.setVisible(true);
        this.dispose();
    }//GEN-LAST:event_btnXuatThuocActionPerformed

    private void btnDanhMucThuocVaBenhActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDanhMucThuocVaBenhActionPerformed
        // TODO add your handling code here:
        DanhMucThuocVaBenhUI danhMucThuocVaBenh = new DanhMucThuocVaBenhUI();
        danhMucThuocVaBenh.setVisible(true);
        this.dispose();
    }//GEN-LAST:event_btnDanhMucThuocVaBenhActionPerformed

    private void btnThongKeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThongKeActionPerformed
        // TODO add your handling code here:
        ThongKeUI thongKe = new ThongKeUI();
        thongKe.setVisible(true);
        this.dispose();
    }//GEN-LAST:event_btnThongKeActionPerformed

    private void btnNhanVienActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNhanVienActionPerformed
        // TODO add your handling code here:
        NhanVienUI nhanVienUI = new NhanVienUI();
        nhanVienUI.setVisible(true);
        this.dispose();
    }//GEN-LAST:event_btnNhanVienActionPerformed

    private void btnTaiKhoanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTaiKhoanActionPerformed
        // TODO add your handling code here:
        thongTinTaiKhoan.setVisible(true);
        thongTinTaiKhoan.setLocationRelativeTo(null);
        layThongTinNhanVien();
        hienThiMotNhanVien();
    }//GEN-LAST:event_btnTaiKhoanActionPerformed

    private void btnCapNhatTaiKhoanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCapNhatTaiKhoanActionPerformed
        // TODO add your handling code here:
        CapNhatTaiKhoan.setVisible(true);
        CapNhatTaiKhoan.setLocationRelativeTo(null);
        thongTinTaiKhoan.dispose();
        
        //hien thi thong tin tai khoan len form
        txtHo.setText(ho);
        txtTen.setText(ten);
        txtChucVu.setText(chucVu);
        txtTuoi.setText(tuoi+"");
        txtDiaChi.setText(diaChi);
        txtSDT.setText(sDT);
        txtEmail.setText(email);
        txtTenDangNhap.setText(tenDangNhap);    
    }//GEN-LAST:event_btnCapNhatTaiKhoanActionPerformed

    //function check do dai chuoi
    public boolean checkDoDai(String value, int min, int max){
        if (value.length() >= min && value.length() <= max ) {
            return true;
        }
        
        return false;
    }
    //Function check So toi thieu va toi da
    public boolean checkMinToMax(String value, int min, int max){
        if (Integer.parseInt(value) >= min && Integer.parseInt(value) <= max) {
            return true;
        }
        return false;
    }
    //function reg
    public boolean  checkReg(String value, String pattern){
        
        if (value.matches(pattern)){
            return true;
        }
        return false;
    }
    
    public String ngatChuoi(String value, String token, int viTriMuonLay){
        String result[] = value.split(token);
        return result[viTriMuonLay];
    }
            
    public boolean checkMax(String value, int Min){
        if (Integer.parseInt(value) >= Min) {
            return true;
        }
        
        return false;
    }
    public String md5(String str){
		MessageDigest md;
		String result = "";
		try {
			md = MessageDigest.getInstance("MD5");
			md.update(str.getBytes());
			BigInteger bi = new BigInteger(1, md.digest());
			
			result = bi.toString(16);
		} catch (NoSuchAlgorithmException e) {
			e.printStackTrace();
		}
		return result;
	}
    
    
    public void layThongTinNhanVien(){
        for (NhanVien nhanVien : dsNhanVienTinh) {
            maNV = nhanVien.getMaNhanVien();
            ho = nhanVien.getHo();
            ten = nhanVien.getTen();
            chucVu = nhanVien.getChucVu();
            tuoi = nhanVien.getTuoi();
            diaChi = nhanVien.getDiaChi();
            sDT = nhanVien.getSDT();
            email = nhanVien.getEmail();
            tenDangNhap = nhanVien.getTenDangNhap();
            matKhau = nhanVien.getMatKhau();
            level = nhanVien.getLevel();
        }
    }
    
    private void hienThiMotNhanVien(){
        lbHoTen.setText(ho+" "+ten);
        lbChucVu.setText(chucVu);
        lbTuoi.setText(tuoi+"");
        lbDiaChi.setText(diaChi);
        lbSDT.setText(sDT);
        lbEmail.setText(email);
        lbTenDangNhap.setText(tenDangNhap);
    }
    
    private void btbLuuTaiKhoanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btbLuuTaiKhoanActionPerformed
        // su kien luu tai khoan:
        NhanVien nhanVien = new NhanVien();
        
        //ma nhan vien
        nhanVien.setMaNhanVien(maNV);

        //check ho
        if (checkDoDai(txtHo.getText(), 3, 50)) {
            nhanVien.setHo(txtHo.getText().trim());
        }else{
            JOptionPane.showMessageDialog(null, "Họ không hợp lệ. Vui lòng kiểm tra lại");
            txtHo.requestFocus();
            return;
        }
        
        //check ho
        if (checkDoDai(txtTen.getText(), 3, 50)) {
            nhanVien.setTen(txtTen.getText().trim());
        }else{
            JOptionPane.showMessageDialog(null, "Tên không hợp lệ. Vui lòng kiểm tra lại");
            txtTen.requestFocus();
            return;
        }

        //check chuc vu
        if (checkDoDai(txtChucVu.getText(), 3, 50)) {
            nhanVien.setChucVu(txtChucVu.getText().trim());
        }else{
            JOptionPane.showMessageDialog(null, "Chức vụ phải từ 3 đến 50 ký tự.");
            txtChucVu.requestFocus();
            return;
        }

        //check tuoi
        if (checkReg(txtTuoi.getText(), "\\d{1,3}") && checkMinToMax(txtTuoi.getText(), 18, 60)) {
            nhanVien.setTuoi(Integer.parseInt(txtTuoi.getText().trim()));
        }else{
            JOptionPane.showMessageDialog(null, "Tuổi là số nguyên dương từ 18 trở lên có độ dài tối đa 3 ký tự.");
            txtTuoi.requestFocus();
            return;
        }

        //check dia chi
        if(checkDoDai(txtDiaChi.getText(), 5, 100)){
            nhanVien.setDiaChi(txtDiaChi.getText().trim());
        }else{
            JOptionPane.showMessageDialog(null, "Địa chỉ từ 5 đến 100 ký tự");
            txtDiaChi.requestFocus();
            return;
        }
        
        //check SDT
        if (checkReg(txtSDT.getText(),"\\d{10,11}")) {
            nhanVien.setSDT(txtSDT.getText());
        }else{
            JOptionPane.showMessageDialog(null, "Số điện thoại không hợp lệ. Vui lòng kiểm tra lại!");
            txtSDT.requestFocus();
            return;
        }
        
        //check email
        String patternMail ="^[\\w-\\+]+(\\.[\\w]+)*@[\\w-]+(\\.[\\w]+)*(\\.[a-z]{2,})$";
        if (checkReg(txtEmail.getText(), patternMail)) {
            nhanVien.setEmail(txtEmail.getText().trim());
        }else{
            JOptionPane.showMessageDialog(null, "Địa chỉ email không hợp lệ.");
            txtEmail.requestFocus();
            return;
        }

        //check ten dang nhap
        if (checkReg(txtTenDangNhap.getText(), "^[a-z0-9._-]{3,15}$")) {
            nhanVien.setTenDangNhap(txtTenDangNhap.getText().trim());
        }else{
            JOptionPane.showMessageDialog(null, "Tên đăng nhập từ 3-15 ký tự từ a-Z,Các chữ số từ 0-9 và một số ký tự đặc biệt _,-,.");
            txtTenDangNhap.requestFocus();
            return;
        }

        //check mat khau
        if (!txtMatKhau.getText().equalsIgnoreCase(txtNhapLaiMatKhau.getText())) {
            JOptionPane.showMessageDialog(null, "Mật khẩu không giống nhau");
            return;
        }
        
        if (checkReg(txtMatKhau.getText(), "^(?=.*\\d)(?=.*[a-zA-Z])[0-9a-zA-Z@#$%^&*_!]{6,}")) {
            nhanVien.setMatKhau(md5(txtMatKhau.getText()));
        }else{
            JOptionPane.showMessageDialog(null, "Mật khẩu có độ dài tối thiểu 6 ký tự, có ít nhất 1 ký tự thường,\n 1 ký tự viết hoa và 1 ký tự số, hoặc số ký tự đặc biệt ! # $ @ + , ? . -");
            txtMatKhau.requestFocus();
            return;
        }
        
        //level
        nhanVien.setLevel(level);
        
        //Thuc hien cap nhat
        NhanVienService nhanVienService = new NhanVienService();
        int result = nhanVienService.suaNhanVien(nhanVien);
        if (result>0) {
            hienThiMotNhanVien();
            JOptionPane.showMessageDialog(null, "Đã cập nhật");
        }else{
            JOptionPane.showMessageDialog(null, "Email hoặc tên tài khoản đã được sử dụng. Vui lòng kiểm tra lại");
        }

    }//GEN-LAST:event_btbLuuTaiKhoanActionPerformed

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton5ActionPerformed
        // TODO add your handling code here:
        CapNhatTaiKhoan.dispose();
    }//GEN-LAST:event_jButton5ActionPerformed

    private void btnDangXuatActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDangXuatActionPerformed
        // TODO add your handling code here:
        DangNhapUI dangNhapUI = new DangNhapUI();
        dangNhapUI.setVisible(true);
        thongTinTaiKhoan.dispose();
        this.dispose();
    }//GEN-LAST:event_btnDangXuatActionPerformed

    private void cbHienMKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbHienMKActionPerformed
        // TODO add your handling code here:
        if (cbHienMK.isSelected()) {
            cbHienMK.setText("Ẩn");
            txtMatKhau.setEchoChar((char)0);
            txtNhapLaiMatKhau.setEchoChar((char)0);
        }else{
            cbHienMK.setText("Hiện");
            txtMatKhau.setEchoChar('*');
            txtNhapLaiMatKhau.setEchoChar('"');
        }
    }//GEN-LAST:event_cbHienMKActionPerformed
//Ham doc so thanh chu
    public static final String KHONG = "không";    
    public static final String MOT = "một";
    public static final String HAI = "hai";
    public static final String BA = "ba";
    public static final String BON = "bốn";
    public static final String NAM = "năm";
    public static final String SAU = "sáu";
    public static final String BAY = "bảy";
    public static final String TAM = "tám";
    public static final String CHIN = "chín";
    public static final String LAM = "lăm";
    public static final String LE = "lẻ";
    public static final String MUOI = "mươi";
    public static final String MUOIF = "mười";
    public static final String MOTS = "mốt";
    public static final String TRAM = "trăm";
    public static final String NGHIN = "nghìn";
    public static final String TRIEU = "triệu";
    public static final String TY = "tỷ";
    public static final String [] number = {KHONG, MOT, HAI, BA,
        BON, NAM, SAU, BAY, TAM, CHIN};
    
     //Hàm chính đọc số
    public static ArrayList<String> readNum(String a)
    {
        ArrayList<String> kq = new ArrayList<String>();
 
 
        //Cắt chuổi string chử số ra thành các chuổi nhỏ 3 chử số
        ArrayList<String> List_Num = Split(a, 3);
 
 
        while (List_Num.size() != 0)
        {      
            //Xét 3 số đầu tiên của chuổi (số đầu tiên của List_Num)
            switch (List_Num.size() % 3)
            {
            //3 số đó thuộc hàng trăm
            case 1:
                kq.addAll(read_3num(List_Num.get(0)));
                break;
            // 3 số đó thuộc hàng nghìn
            case 2:
                ArrayList<String> nghin = read_3num(List_Num.get(0));
                if(!nghin.isEmpty()){
                    kq.addAll(nghin);
                    kq.add(NGHIN);
                }
                break;
            //3 số đó thuộc hàng triệu
            case 0:                    
                ArrayList<String> trieu = read_3num(List_Num.get(0));
                if(!trieu.isEmpty()) {
                    kq.addAll(trieu);
                    kq.add(TRIEU);
                }
                break;
            }
           
            //Xét nếu 3 số đó thuộc hàng tỷ
            if (List_Num.size() == (List_Num.size() / 3) * 3 + 1 && List_Num.size() != 1) kq.add(TY);
           
            //Xóa 3 số đầu tiên để tiếp tục 3 số kế
            List_Num.remove(0);
        }
 
 
        return kq;
    }
    
    //Đọc 3 số
    public static ArrayList<String> read_3num(String a)
    {
        ArrayList<String> kq = new ArrayList<String>();
        int num = -1;
        try{ num = Integer.parseInt(a); } catch(Exception ex){}
        if (num == 0) return kq;
 
 
 
 
        int hang_tram = -1;
        try{ hang_tram = Integer.parseInt(a.substring(0, 1)); } catch(Exception ex){}
        int hang_chuc = -1;
        try{ hang_chuc = Integer.parseInt(a.substring(1, 2)); } catch(Exception ex){}
        int hang_dv = -1;
        try{ hang_dv = Integer.parseInt(a.substring(2, 3)); } catch(Exception ex){}
 
 
        //xét hàng trăm
        if (hang_tram != -1){
            kq.add(number[hang_tram]);
            kq.add(TRAM);
        }
 
 
        //xét hàng chục
        switch (hang_chuc)
        {
        case -1:
            break;
        case 1:
            kq.add(MUOIF);
            break;
        case 0:
            if (hang_dv != 0) kq.add(LE);
            break;
        default:
            kq.add(number[hang_chuc]);
            kq.add(MUOI);
            break;
        }
 
 
        //xét hàng đơn vị
        switch (hang_dv)
        {
        case -1:
            break;
        case 1:
            if ((hang_chuc != 0) && (hang_chuc != 1) && (hang_chuc != -1))
                kq.add(MOTS);
            else kq.add(number[hang_dv]);
            break;
        case 5:
            if ((hang_chuc != 0) && (hang_chuc != -1))
                kq.add(LAM);
            else kq.add(number[hang_dv]);
            break;
        case 0:
            if (kq.isEmpty()) kq.add(number[hang_dv]);
            break;
        default:
            kq.add(number[hang_dv]);
            break;
        }
        return kq;
    }
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TrangChuUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TrangChuUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TrangChuUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TrangChuUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new TrangChuUI().setVisible(true);
                
            }
        });
    }
public static ArrayList<String> Split(String str, int chunkSize)    {
        int du = str.length() % chunkSize;
        //Nếu độ dài chuổi không phải bội số của chunkSize thì thêm # vào trước cho đủ.
        if (du != 0)
            for (int i = 0; i < (chunkSize - du); i++) str = "#" + str;
        return splitStringEvery(str, chunkSize);
    }
 
 
    //Hàm cắt chuổi ra thành chuổi nhỏ
    public static ArrayList<String> splitStringEvery(String s, int interval) {
        ArrayList<String> arrList = new ArrayList<String>();
        int arrayLength = (int) Math.ceil(((s.length() / (double) interval)));
        String[] result = new String[arrayLength];
        int j = 0;
        int lastIndex = result.length - 1;
        for (int i = 0; i < lastIndex; i++) {
            result[i] = s.substring(j, j + interval);
            j += interval;
        }
        result[lastIndex] = s.substring(j);
 
        /*
          Có thể dùng hàm sau để cắt nhưng hiệu suất sẽ thấp hơn cách trên
         result = s.split("(?<=\\G.{" + interval + "})");
         */
 
        arrList.addAll(Arrays.asList(result));
        return arrList;
    }
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JDialog CapNhatTaiKhoan;
    private javax.swing.JButton btbLuuTaiKhoan;
    private javax.swing.JButton btnCapNhatTaiKhoan;
    private javax.swing.JButton btnDangXuat;
    private javax.swing.JButton btnDanhMucThuocVaBenh;
    private javax.swing.JButton btnNhanVien;
    private javax.swing.JButton btnNhapThuoc;
    private javax.swing.JButton btnTaiKhoan;
    private javax.swing.JButton btnThongKe;
    private javax.swing.JButton btnXuatThuoc;
    private javax.swing.JCheckBox cbHienMK;
    private javax.swing.JButton jButton5;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JLabel lbChucVu;
    private javax.swing.JLabel lbDiaChi;
    private javax.swing.JLabel lbEmail;
    private javax.swing.JLabel lbHoTen;
    private javax.swing.JLabel lbSDT;
    private javax.swing.JLabel lbTenDangNhap;
    private javax.swing.JLabel lbTuoi;
    private javax.swing.JLabel lblTenDangNhap;
    private javax.swing.JDialog thongTinTaiKhoan;
    private javax.swing.JTextField txtChucVu;
    private javax.swing.JTextArea txtDiaChi;
    private javax.swing.JTextField txtEmail;
    private javax.swing.JTextField txtHo;
    private javax.swing.JPasswordField txtMatKhau;
    private javax.swing.JPasswordField txtNhapLaiMatKhau;
    private javax.swing.JTextField txtSDT;
    private javax.swing.JTextField txtTen;
    private javax.swing.JTextField txtTenDangNhap;
    private javax.swing.JTextField txtTuoi;
    // End of variables declaration//GEN-END:variables
}
